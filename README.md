# üöÄ JupyterHub + FastAPI Backend  

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π single-user —Å–µ—Ä–≤–µ—Ä JupyterHub –Ω–∞ FastAPI, –∏—Å–ø–æ–ª—å–∑—É—è –∫–∞—Å—Ç–æ–º–Ω—ã–π Spawner.  

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏  
- FastAPI backend –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ Jupyter single-user —Å–µ—Ä–≤–µ—Ä–∞.  
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ middleware.  
- –ü–µ—Ä–µ–¥–∞—á–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∏.  
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JupyterHub API.  

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞  
```
üìÅ project  
‚îÇ-- üìÑ jupyterhub_config.py    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è JupyterHub  
‚îÇ-- üìÑ backend.py              # Backend —Å–µ—Ä–≤–µ—Ä (FastAPI)  
‚îÇ-- üìÑ single_user_server.py   # Single-user —Å–µ—Ä–≤–µ—Ä (FastAPI)  
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞  

### 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã  
```bash
sudo apt update && sudo apt install -y npm nodejs python3-venv python3-pip
```

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `configurable-http-proxy` —á–µ—Ä–µ–∑ npm  
```bash
npm install -g configurable-http-proxy
```

### 3Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏(–º–æ–∂–Ω–æ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ)
```bash
pip install fastapi uvicorn httpx jupyterhub
```

### 4Ô∏è‚É£ –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)  
```bash
python3 -m venv venv  
source venv/bin/activate  # –î–ª—è Linux/macOS  
venv\Scripts\activate     # –î–ª—è Windows  
```

### 5Ô∏è‚É£ –î–æ–±–∞–≤–∏—Ç—å `configurable-http-proxy` –≤ PATH  
```bash
export PATH="$PATH:$(pwd)/node_modules/configurable-http-proxy/bin"
```

### 6Ô∏è‚É£ –ó–∞–ø—É—Å–∫ JupyterHub  
```bash
jupyterhub -f jupyterhub_config.py
```
–∏ –æ—Ç–¥–µ–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å `backend.py`
```bash
python3 backend.py
```

## üî• –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ  
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:  
- JupyterHub –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `http://localhost:8000`.  
- Backend –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `http://localhost:8003`.  
- Single-user —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ middleware.  

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã  
1. **–û—Ç–∫—Ä—ã—Ç—å JupyterHub**:  
   –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É [http://localhost:8000](http://localhost:8000).  
2. **–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É**:  
   –í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–∞—Ä–æ–ª—å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –≤–∫–ª—é—á–µ–Ω `dummy`-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä).  
3. **–ó–∞–ø—É—Å–∫ single-user —Å–µ—Ä–≤–µ—Ä–∞**:  
   –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞, —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.  
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend**:  
   –û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:8003](http://localhost:8003) –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.   
5. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã**:  
   –í JupyterHub –Ω–∞–∂–º–∏—Ç–µ "Logout" –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –∑–∞–π—Ç–∏.  

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞  
–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è backend –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ:  
```bash
python backend.py
```

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ single-user —Å–µ—Ä–≤–µ—Ä–∞:  
```bash
python single_user_server.py
```

–í –∫–∞–∂–¥–æ–π –∏–∑ –∫–æ–Ω—Å–æ–ª–µ–π –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã `jupyterhub` –∏ `backend.py` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –≤—ã–≤–æ–¥—è—Ç—Å—è –ª–æ–≥–∏

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã  
- üìñ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è JupyterHub: [JupyterHub Docs](https://docs.jupyter.org/en/latest/)

